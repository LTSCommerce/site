<!DOCTYPE html>
<html lang="<%= site.meta?.language || 'en' %>">
<head>
    <meta charset="<%= site.meta?.charset || 'UTF-8' %>">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="<%- pageDescription || site.description %>">
    <title><%- pageTitle || site.title %></title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="<%= getAssetPath('/css/main.css') %>">
    <% if (typeof pageCss !== 'undefined') { %>
    <link rel="stylesheet" href="<%= getAssetPath('/css/' + pageCss + '.css') %>">
    <% } %>
    <script>
        // Immediate fade-in fallback
        document.addEventListener('DOMContentLoaded', function() {
            document.body.style.opacity = '1';
        });
    </script>
    <noscript>
        <style>
            body { opacity: 1 !important; }
        </style>
    </noscript>
</head>
<body style="opacity: 0;">
    <%- include('../partials/navigation', { currentPage: currentPage || 'home' }) %>
    
    <main class="main-content">
        <%- content %>
    </main>

    <%- include('../partials/footer') %>

    <script src="<%= getAssetPath('/js/main.js') %>" type="module"></script>
    <% if (typeof pageJs !== 'undefined') { %>
    <script src="<%= getAssetPath('/js/' + pageJs + '.js') %>" type="module"></script>
    <% } %>
</body>
</html>